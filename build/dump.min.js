(()=>{let gsa=e=>document.currentScript.getAttribute(e),root=eval(gsa("init-root"))||window,name=eval(gsa("init-name"))||"Dump",Dump={},isArray=e=>Array.isArray(e),isUndefined=e=>void 0===e,isNull=e=>null===e,isSet=e=>null!=e,isString=e=>"string"==typeof e,isInfinity=e=>e===1/0?1:e===-1/0?-1:0,isNumber=e=>"number"==typeof e&&isFinite(e),isNumeric=e=>/^[-+]?\d+(\.\d+)?$/.test(e),isInt=e=>isNumber(e)&&e%1==0,isFloat=e=>isNumber(e)&&e%1!=0,isBoolean=e=>!0===e||!1===e,isObject=e=>"object"==typeof e&&!isNull(e),isFunction=e=>"function"==typeof e,isNode=e=>e instanceof Node,isElement=e=>e instanceof Element,clamp=(e,t,r)=>e<t?t:e>r?r:e,map=(e,t,r,s,i)=>(e-t)*(i-s)/(r-t)+s,loop=(e,t,r)=>(e%=r-t)+(e<0?e?r:0:t),delay=e=>new Promise(t=>setTimeout(t,e));function createFormData(e){let t=e;return!e||e instanceof FormData||(e instanceof HTMLFormElement?t=new FormData(e):(t=new FormData,function e(r,s){for(let i in r){let n=s?`${s}[${i}]`:i,a=r[i];a instanceof File?t.append(n,a,a.name):isObject(a)?e(a,s?n:i):t.append(n,a)}}(e))),t}let _Array={forEach(e,t,r=e){let s=0;for(let i of e)t.call(r,i,s++,e)},find(e,t,r=e){let s=0;for(let i of e)if(t.call(r,i,s++,e))return i},filter(e,t,r=e){let s=[],i=0;for(let n of e)t.call(r,n,i++,e)&&s.push(n);return s},map(e,t,r=e){let s=[],i=0;for(let n of e)s.push(t.call(r,n,i++,e));return s},toObject(e,t,r=e){let s=[],i=0;for(let n of e)s[t.call(r,n,i++,e)]=n;return s},includes(e,t){for(let r of e)if(r===t)return!0;return!1}},_Object={defineProperty:(e,t,r,s=!0,i="auto")=>("auto"===i&&(i=!isFunction(r)),e[t]=r,Object.defineProperty(e,t,{enumerable:i,writable:s}),e),defineReadonly:(e,t,r,s)=>(ObjectMethods.defineProperty(e,t,r,!1,s),e),defineClosure(e,t,r,s,i=!0){if(!isFunction(r)||s&&!isFunction(s))throw"not a function";return Object.defineProperty(e,t,{get:r,set:s,enumerable:i}),e},merge:(e,...t)=>(t.forEach(t=>{Object.keys(t).forEach(r=>{isObject(e[r])&&isObject(t[r])?_Object.merge(e[r],t[r]):e[r]=t[r]})}),e),copy(e){let t=e;return isArray(e)?(t=[],e.forEach((e,r)=>t[r]=_Object.copy(e))):isObject(e)&&(t={},Object.keys(e).forEach(r=>t[r]=_Object.copy(e[r]))),t}};function setExtends(e,t,r=e.name){return t&&(e.prototype=Object.create(t.prototype)),Object.defineProperties(e.prototype,{constructor:{value:e},[Symbol.toStringTag]:{value:r}}),e}let tagRegExp=/^\s*</,childTagRegExp=/^\s*<(\w+)/,_Element={appendElement(e,t){return isObject(e)||(e=tagRegExp.test(e)?_Element.appendHTML.call(this,e,t):document.createElementNS(this.namespaceURI,isString(e)?e:"div")),t?this.insertBefore(e,t):this.appendChild(e),e},appendHTML(e,t){let r=document.createElementNS(this.namespaceURI,this.localName);return r.insertAdjacentHTML("beforeend",e),r=r.querySelector(e.match(childTagRegExp)[1].toLowerCase()),t?this.insertBefore(r,t):this.appendChild(r),r},appendText(e,t){return _Element.appendElement.call(this,document.createTextNode(e),t)},insertElement(e,t){return _Element.appendElement.call(this,...arguments),this},insertHTML(e,t){return _Element.appendHTML.call(this,...arguments),this},insertText(e,t){return _Element.appendText.call(this,...arguments),this},css(...e){return e=e.join(" "),this instanceof SVGElement?this.className.baseVal=e:this.className=e,this},acss(...e){return e.forEach(e=>this.classList.add(e)),this},rcss(...e){return e.forEach(e=>this.classList.remove(e)),this},tcss(...e){return e.forEach(e=>this.classList.toggle(e)),this},hcss(...e){let t=0;return e.forEach(e=>this.classList.contains(e)&&t++),t},attr(e){return isArray(e)?e.forEach(e=>_Element.sattr.call(this,e[0],e[1])):Object.keys(e).forEach(t=>_Element.sattr.call(this,t,e[t])),this},sattr(e,t=""){return this.setAttribute(e,t),this},gattr(e){return this.getAttribute(e)},rattr(...e){return e.forEach(e=>this.removeAttribute(e)),this},hattr(e,t){return this.hasAttribute(e)&&(!!isUndefined(t)||this.getAttribute(e)===t)},snatch(){return this.remove(),this},setDisabled(e=1){return isUndefined(this.__setDisabled__count)&&_Object.defineProperty(this,"__setDisabled__count",0,!0,!1),this.disabled=this.__setDisabled__count+=e,()=>e?(this.disabled=--this.__setDisabled__count,--e):e}};class EventDispatcher{static create(e,t=[]){return setExtends(class extends EventDispatcher{constructor(){super(),t.forEach(e=>{let t=null;Object.defineProperty(this,`on${e}`,{enumerable:!0,get:()=>t,set:r=>{isFunction(t)&&this.removeEventListener(e,t),isFunction(r)?(t=r.bind(this),this.addEventListener(e,t)):t=null}})})}},EventDispatcher,e+"EventDispatcher")}constructor(){Object.defineProperty(this,"_listeners",{enumerated:!1,writable:!0}),this._listeners={}}dispatchEvent(e,t={}){isArray(e)||(e=[e]),e.forEach(e=>{isObject(e)||(e={type:e,target:this}),Object.assign(e,t),isArray(this._listeners[e.type])||(this._listeners[e.type]=[]);let r=this._listeners[e.type];r._lastEvent=e;for(let t=0;t<r.length;t++)r[t][0].call(this,e),r[t][1]&&r.splice(t--,1)})}addEventListener(e,t,r=!1){isArray(e)||(e=[e]),isArray(t)||(t=[t]);let s={lastEvent:!0};isObject(r)?Object.assign(s,r):s.once=r,e.forEach(e=>{isArray(this._listeners[e])||(this._listeners[e]=[]);let r=this._listeners[e];t.forEach(e=>{s.lastEvent&&r._lastEvent&&(e.call(this,r._lastEvent),s.once)||r.push([e,s.once])})})}removeEventListener(e,t){isArray(e)||(e=[e]),isArray(t)||(t=[t]),e.forEach(e=>{isArray(this._listeners[e])||(this._listeners[e]=[]);let r=this._listeners[e];for(let e=0;e<t.length;e++)for(let s=0;s<r.length;s++)t[e]===r[s][0]&&r.splice(s--,1)})}}setExtends(EventDispatcher);class FileDrop extends(EventDispatcher.create("FileDrop",["drop"])){static readDir(e,t=""){return new Promise(r=>{let s=[];!function e(i){i.readEntries(async n=>{if(!n.length)return r(s);for(let e=0,r=n.length;e<r;e++){let r=n[e];r.isFile?s.push(await new Promise(e=>{r.file(r=>{Object.defineProperty(r,"path",{value:`${t}/${r.name}`,enumerable:!0}),e(r)})})):r.isDirectory&&s.push(...await FileDrop.readDir(r,`${t}/${r.name}`))}e(i)})}(e.createReader())})}constructor(e,t="drag"){super(),t&&(t+="-hover");let r=async e=>{e.preventDefault();let t=[];for(let r of e.dataTransfer.items){let e;null!=r.webkitGetAsEntry&&(e=r.webkitGetAsEntry())?e.isFile?t.push(r.getAsFile()):e.isDirectory&&t.push(...await FileDrop.readDir(e,e.name)):null!=r.getAsFile&&(null!=r.kind&&"file"!==r.kind||t.push(r.getAsFile()))}this.dispatchEvent(e,{files:t})},s=e=>e.preventDefault(),i=()=>e.classList.remove(t),n=()=>e.classList.add(t);e.addEventListener("drop",r),e.addEventListener("drop",i),e.addEventListener("dragover",s),t&&(e.addEventListener("dragenter",n),e.addEventListener("dragover",n),e.addEventListener("dragend",i),e.addEventListener("dragleave",i)),this.dispose=(()=>{e.removeEventListener("drop",r),e.removeEventListener("drop",i),e.removeEventListener("dragover",s),t&&(e.removeEventListener("dragenter",n),e.removeEventListener("dragover",n),e.removeEventListener("dragend",i),e.removeEventListener("dragleave",i))})}}function Limiter(e=1,t){let r=[],s=0,i=()=>{for(;s<e&&s<r.length;)n()},n=async()=>{s++;let{func:e,args:t,res:n}=r.shift();n(await e(...t)),s--,i()};this.setLimit=((t=1)=>(e=t,i())),this.push=((...e)=>new Promise(s=>(r.push({func:t||e.shift(),args:e,res:s}),i())))}setExtends(FileDrop),setExtends(Limiter);class Fetch{constructor(e,t){this.domain=e||null,this.headers=t||{},this.bodyCallback=null,this.responseCallback=null,this.cache={}}fetch(e,t,r,s=!1){let{bodyCallback:i,responseCallback:n}=r=r||{};return delete r.bodyCallback,delete r.responseCallback,r.method=t||"GET",r.headers=Object.assign({},this.headers||{},r.headers||{}),void 0===i&&this.bodyCallback?r.body=this.bodyCallback(r.body):i&&(r.body=i(r.body)),e=new URL(e,this.domain).toString(),"GET"===r.method&&!s&&e in this.cache?this.cache[e]:this.cache[e]=fetch(e,r).then(e=>(void 0===n&&this.responseCallback?e=this.responseCallback(e):n&&(e=n(e)),e))}get(e,t={},r=!1){return this.fetch(e,"GET",t,r)}post(e,t={},r=!1){return this.fetch(e,"POST",t,r)}patch(e,t={},r=!1){return this.fetch(e,"PATCH",t,r)}delete(e,t={},r=!1){return this.fetch(e,"DELETE",t,r)}update(e,t={},r=!1){return this.fetch(e,"UPDATE",t,r)}put(e,t={},r=!1){return this.fetch(e,"PUT",t,r)}}function Img(e,t){let r=new Image;return t&&(r.onload=r.onerror=r.onabort=(e=>{r.onload=r.onerror=r.onabort=null,t(("error"===e.type||"abort"===e.type)&&e,r)})),e&&(r.src=e),r}function debounce(e,t){let r=!1;return function(){r||(r=!0,e.apply(this,arguments),setTimeout(()=>r=!1,t))}}function throttle(e,t){let r=!1,s=null,i=null;return function n(){r?(s=this,i=arguments):(r=!0,e.apply(this,arguments),setTimeout(()=>{r=!1,i&&(n.apply(s,i),s=i=null)},t))}}function defer(e,t){let r=0;return function(){clearTimeout(r),r=setTimeout(()=>e.apply(this,arguments),t)}}function parseUrl(e="",t=location.href){let r=new URL(e,t),s={};["host","hostname","href","origin","password","pathname","port","protocol"].forEach(e=>s[e]=r[e]),s.hash=r.hash.slice(1),s.search={};for(let e of r.searchParams.keys())s.search[e]=r.searchParams.get(e);return s}function createPromise(){let e,t,r;return{promise:e=new Promise((e,s)=>(t=e,r=s)),resolve:t,reject:r}}function arrayToObject(e,t){let r={};return isString(e)&&(e=e.split(/\,?\s*/)),e.forEach((e,s)=>r[e]=t[s]),r}Img.load=(async e=>{if(e){let t,r,s;return(t=new Promise((e,t)=>(r=e,s=t))).image=new Img(e,(e,t)=>e?s(e):r(t)),t}throw"Unexpected src"}),Dump.Img=Img,Dump.FileDrop=FileDrop,Dump.Limiter=Limiter,Dump.Fetch=Fetch,Dump.EventDispatcher=EventDispatcher,Dump.clamp=clamp,Dump.map=map,Dump.loop=loop,Dump.delay=delay,Dump.createFormData=createFormData,Dump.debounce=debounce,Dump.throttle=throttle,Dump.defer=defer,Dump.parseUrl=parseUrl,Dump.createPromise=createPromise,Dump.arrayToObject=arrayToObject,Dump.Element=_Element,Dump.Object=_Object,Dump.Array=_Array,Dump.is={isArray:isArray,isUndefined:isUndefined,isNull:isNull,isSet:isSet,isString:isString,isInfinity:isInfinity,isNumber:isNumber,isNumeric:isNumeric,isInt:isInt,isFloat:isFloat,isBoolean:isBoolean,isObject:isObject,isFunction:isFunction,isNode:isNode,isElement:isElement},root[name]=Dump})();